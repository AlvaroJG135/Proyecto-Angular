<div class="pagina-normal" [class.blur]="mostrarFormulario">
  <h2>Monitores</h2>
  <button class="btn-add" (click)="abrirFormulario()">Añadir monitor</button>
  <!--Componente filtro-->
  <app-filtro (filterChange)="onFilterChange($event)" placeholder="Busca un monitor..."></app-filtro>
  
  <div class="controles-orden">
    <div class="control-orden">
      <label for="campo-orden">Ordenar por:</label>
      <select id="campo-orden" [(ngModel)]="ordenarPor" (change)="onOrdenChange(ordenarPor)">
        <option value="nombre">Nombre</option>
        <option value="salario">Salario</option>
        <option value="turno">Turno</option>
      </select>
    </div>
    <div class="control-direccion">
      <label for="direccion-orden">Dirección:</label>
      <select id="direccion-orden" [(ngModel)]="ordenar" (change)="onDireccionChange(ordenar)">
        <option value="asc">Ascendente</option>
        <option value="desc">Descendente</option>
      </select>
    </div>
  </div>
  
  <ul class="monitores">
    @for (monitor of filteredMonitores; track trackByMonitorId($index, monitor)){
    <mat-card class="example-card" appearance="outlined">
      <mat-card-header>
        <mat-card-title>{{ monitor.nombre }}</mat-card-title>
        <mat-card-subtitle>{{ monitor._id }}</mat-card-subtitle>
      </mat-card-header>
      <img mat-card-image src="../../assets/imagenes/icono.png" />
      <mat-card-content>
        <p><b>Fecha de nacimiento: </b>{{monitor.fechaNacimiento}}</p>
        <p><b>Turno: </b>{{monitor.turno}}</p>
        <p><b>Salario: </b>{{monitor.salario}}</p>
      </mat-card-content>
      <mat-card-actions>
        <button matButton (click)="onSelect(monitor)">✎ Editar</button>
        <button matButton (click)="delete(monitor)">✕ Eliminar</button>
      </mat-card-actions>
    </mat-card>
    }
  </ul>
</div>

@if(mostrarFormulario){
<div class="formulario">
  <!--Si es true devuelve editar monitor, si es false nuevo monitor-->
  <h3>{{ modoEdicion ? 'Editar Monitor' : 'Nuevo Monitor' }}</h3>
  <form>
    <label>Nombre:</label>
    <!--Permite sincronizar los datos entre el componente y el html-->
    <input [(ngModel)]="nuevoMonitor.nombre" name="nombre" required />
    <label>Fecha de nacimiento:</label>
    <input [(ngModel)]="nuevoMonitor.fechaNacimiento" name="fechaNacimiento" type="date" />
    <label>Salario:</label>
    <input [(ngModel)]="nuevoMonitor.salario" name="salario" type="number" min="0" />
    <label>Turno:</label>
    <input [(ngModel)]="nuevoMonitor.turno" name="turno" />
    <div class="modal-actions">
      <button type="button" class="cacelar" (click)="cancelarFormulario()">Cancelar</button>
      @if (!modoEdicion) {
        <button type="button" class="añadir" (click)="guardarMonitor()">Añadir</button>
      }
      @if (modoEdicion) {
        <button type="button" class="añadir" (click)="modificarMonitor()">Modificar</button>
      }
    </div>
  </form>
</div>
}